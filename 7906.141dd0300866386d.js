"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[7906],{97906:(M,E,a)=>{a.r(E),a.d(E,{DocPoHttpInterceptorModule:()=>g});var b=a(65468),c=a(9072),e=a(54496),r=a(76036),C=a(91368),O=a(59),k=a(97048),p=a(44716),I=a(51536);class d{http;headerParam;requestMessage;status;errorMessage='{\n    "code": "401",\n    "message": "Not Authorized",\n    "detailTitle": "Invalid credentials",\n    "detailedMessage": "The request has not been applied because it lacks valid authentication credentials for the target resource.",\n    "type": "error",\n    "helpUrl": "",\n    "details": [{\n        "code": "406",\n        "message": "Not Acceptable",\n        "detailedMessage": "The target resource does not have a current representation that would be acceptable to the user agent",\n        "type": "error"\n    }]\n}';successMessage='{\n    "_messages": [\n        {\n            "code": "200",\n            "message": "Ok",\n            "detailedMessage": "The request has succeeded.",\n            "type": "success",\n            "helpUrl": "",\n            "details": [{\n              "code": "202",\n              "message": "Accepted",\n              "detailTitle": "Request was received",\n              "detailedMessage": "The request has been accepted for processing, but the processing has not been completed.",\n              "type": "warning"\n            }]\n        }\n    ]\n}';statusOptions=[{label:"200 - Success",value:"200"},{label:"401 - Error",value:"401"}];headerParamOptions=[{label:"X-PO-No-Message",value:"No-Message"},{label:"X-PO-No-Error",value:"No-Error"}];apiSubscription;constructor(s){this.http=s}ngOnDestroy(){this.apiSubscription&&this.apiSubscription.unsubscribe()}ngOnInit(){this.restore()}changeOption(){this.requestMessage="200"===this.status?this.successMessage:this.errorMessage}getParam(){return"No-Message"===this.headerParam?{"X-PO-No-Message":"true"}:"No-Error"===this.headerParam?{"X-PO-No-Error":"true"}:{}}processRequest(){const s=this.getParam(),o=JSON.parse(this.requestMessage),t={status:this.status||""};this.apiSubscription=this.http.post("https://po-sample-api.onrender.com/v1/messages",o,{headers:s,params:t}).subscribe()}restore(){this.headerParam=void 0,this.requestMessage=this.successMessage,this.status="200"}static \u0275fac=function(o){return new(o||d)(e.GI1(k.KK))};static \u0275cmp=e.In1({type:d,selectors:[["sample-po-http-interceptor-labs"]],decls:15,vars:5,consts:[["p-height","330","p-theme","vs-dark",3,"ngModel","ngModelChange"],["requestForm","ngForm"],[1,"po-row"],["name","status","p-label","Http Status",1,"po-md-6",3,"ngModel","p-options","ngModelChange","p-change"],["name","headerParam","p-label","Disables Notifications",1,"po-md-6",3,"ngModel","p-options","ngModelChange"],[1,"po-row","po-mt-1"],["p-label","Process Request",1,"po-md-3",3,"p-click"],["p-label","Sample Restore",1,"po-md-3",3,"p-click"]],template:function(o,t){1&o&&(e.I0R(0,"h2"),e.OEk(1,"Process request with Http Interceptor"),e.C$Y(),e.I0R(2,"p"),e.OEk(3,"Edit response object by server with pattern expected by Http Interceptor:"),e.C$Y(),e.I0R(4,"po-code-editor",0),e.iHE("ngModelChange",function(n){return e.kNx(t.requestMessage,n)||(t.requestMessage=n),n}),e.C$Y(),e.wR5(5,"hr"),e.I0R(6,"form",null,1)(8,"div",2)(9,"po-radio-group",3),e.iHE("ngModelChange",function(n){return e.kNx(t.status,n)||(t.status=n),n}),e.qCj("p-change",function(){return t.changeOption()}),e.C$Y(),e.I0R(10,"po-radio-group",4),e.iHE("ngModelChange",function(n){return e.kNx(t.headerParam,n)||(t.headerParam=n),n}),e.C$Y()(),e.I0R(11,"div",5)(12,"po-button",6),e.qCj("p-click",function(){return t.processRequest()}),e.C$Y()(),e.I0R(13,"div",5)(14,"po-button",7),e.qCj("p-click",function(){return t.restore()}),e.C$Y()()()),2&o&&(e.yG2(4),e.OKB("ngModel",t.requestMessage),e.yG2(5),e.OKB("ngModel",t.status),e.E7m("p-options",t.statusOptions),e.yG2(),e.OKB("ngModel",t.headerParam),e.E7m("p-options",t.headerParamOptions))},dependencies:[p.sz,p.ue,p.u,p._G,p.SC,r.mUQ,r.s$K,I.kR],encapsulation:2})}const R=f=>({"docs-sample-code-tabs":f});class u{hideSampleCodeTabs=!0;sampleCodeButtonLabel="Talk is cheap, show me the code!";sampleCodeButtonIcon="po-icon po-icon-plus";toggleSampleCodeTabs(){this.hideSampleCodeTabs=!this.hideSampleCodeTabs,this.sampleCodeButtonLabel=this.hideSampleCodeTabs?"Talk is cheap, show me the code!":"Okay, hide the code",this.sampleCodeButtonIcon=this.hideSampleCodeTabs?"po-icon-plus":"po-icon-minus"}static \u0275fac=function(o){return new(o||u)};static \u0275cmp=e.In1({type:u,selectors:[["sample-po-http-interceptor-labs-view"]],decls:24,vars:6,consts:[[1,"sample-blockquote"],[1,"sample-title","po-font-text-large-bold"],[1,"show-me-the-code",3,"click"],[3,"ngClass"],["p-size","2"],["p-label","HTML","p-active",""],[1,"doc-label-path"],["appCodeHighlight","",1,"html"],["p-label","TS"],["appCodeHighlight","",1,"typescript"],[1,"docs-sample-container"]],template:function(o,t){1&o&&(e.wR5(0,"br"),e.I0R(1,"blockquote",0)(2,"label",1),e.OEk(3,"PO Http Interceptor Labs"),e.C$Y(),e.I0R(4,"a",2),e.qCj("click",function(){return t.toggleSampleCodeTabs()}),e.wR5(5,"span"),e.OEk(6),e.C$Y()(),e.I0R(7,"div",3)(8,"po-tabs",4)(9,"po-tab",5)(10,"div")(11,"label",6),e.OEk(12,"sample-po-http-interceptor-labs.component.html"),e.C$Y(),e.I0R(13,"pre",7),e.OEk(14,'<h2>Process request with Http Interceptor</h2>\n<p>Edit response object by server with pattern expected by Http Interceptor:</p>\n\n<po-code-editor [(ngModel)]="requestMessage" p-height="330" p-theme="vs-dark"> </po-code-editor>\n\n<hr />\n\n<form #requestForm="ngForm">\n  <div class="po-row">\n    <po-radio-group\n      class="po-md-6"\n      name="status"\n      [(ngModel)]="status"\n      p-label="Http Status"\n      [p-options]="statusOptions"\n      (p-change)="changeOption()"\n    >\n    </po-radio-group>\n\n    <po-radio-group\n      class="po-md-6"\n      name="headerParam"\n      [(ngModel)]="headerParam"\n      p-label="Disables Notifications"\n      [p-options]="headerParamOptions"\n    >\n    </po-radio-group>\n  </div>\n\n  <div class="po-row po-mt-1">\n    <po-button class="po-md-3" p-label="Process Request" (p-click)="processRequest()"> </po-button>\n  </div>\n\n  <div class="po-row po-mt-1">\n    <po-button class="po-md-3" p-label="Sample Restore" (p-click)="restore()"> </po-button>\n  </div>\n</form>\n'),e.C$Y()()(),e.I0R(15,"po-tab",8)(16,"div")(17,"label",6),e.OEk(18,"sample-po-http-interceptor-labs.component.ts"),e.C$Y(),e.I0R(19,"pre",9),e.OEk(20,'// import { PoRadioGroupOption } from \'./../../../../../../../dist/ng-components/lib/components/po-field/po-radio-group/po-radio-group-option.interface.d\';\nimport { HttpClient } from \'@angular/common/http\';\nimport { Component, OnDestroy, OnInit } from \'@angular/core\';\n\nimport { PoRadioGroupOption } from \'@po-ui/ng-components\';\nimport { Subscription } from \'rxjs\';\n\n@Component({\n  selector: \'sample-po-http-interceptor-labs\',\n  templateUrl: \'./sample-po-http-interceptor-labs.component.html\'\n})\nexport class SamplePoHttpInterceptorLabsComponent implements OnDestroy, OnInit {\n  headerParam: string;\n  requestMessage: string;\n  status: string;\n\n  errorMessage = `{\n    "code": "401",\n    "message": "Not Authorized",\n    "detailTitle": "Invalid credentials",\n    "detailedMessage": "The request has not been applied because it lacks valid authentication credentials for the target resource.",\n    "type": "error",\n    "helpUrl": "",\n    "details": [{\n        "code": "406",\n        "message": "Not Acceptable",\n        "detailedMessage": "The target resource does not have a current representation that would be acceptable to the user agent",\n        "type": "error"\n    }]\n}`;\n\n  successMessage = `{\n    "_messages": [\n        {\n            "code": "200",\n            "message": "Ok",\n            "detailedMessage": "The request has succeeded.",\n            "type": "success",\n            "helpUrl": "",\n            "details": [{\n              "code": "202",\n              "message": "Accepted",\n              "detailTitle": "Request was received",\n              "detailedMessage": "The request has been accepted for processing, but the processing has not been completed.",\n              "type": "warning"\n            }]\n        }\n    ]\n}`;\n\n  readonly statusOptions: Array<PoRadioGroupOption> = [\n    { label: \'200 - Success\', value: \'200\' },\n    { label: \'401 - Error\', value: \'401\' }\n  ];\n\n  readonly headerParamOptions: Array<PoRadioGroupOption> = [\n    { label: \'X-PO-No-Message\', value: \'No-Message\' },\n    { label: \'X-PO-No-Error\', value: \'No-Error\' }\n  ];\n\n  private apiSubscription: Subscription;\n\n  constructor(private http: HttpClient) {}\n\n  ngOnDestroy() {\n    if (this.apiSubscription) {\n      this.apiSubscription.unsubscribe();\n    }\n  }\n\n  ngOnInit() {\n    this.restore();\n  }\n\n  changeOption() {\n    this.requestMessage = this.status === \'200\' ? this.successMessage : this.errorMessage;\n  }\n\n  getParam() {\n    return this.headerParam === \'No-Message\'\n      ? { \'X-PO-No-Message\': \'true\' }\n      : this.headerParam === \'No-Error\'\n        ? { \'X-PO-No-Error\': \'true\' }\n        : {};\n  }\n\n  processRequest() {\n    const headers = this.getParam();\n    const body = JSON.parse(this.requestMessage);\n    const params = { status: this.status || \'\' };\n\n    this.apiSubscription = this.http\n      .post(`https://po-sample-api.onrender.com/v1/messages`, body, { headers, params })\n      .subscribe();\n  }\n\n  restore() {\n    this.headerParam = undefined;\n    this.requestMessage = this.successMessage;\n    this.status = \'200\';\n  }\n}\n'),e.C$Y()()()()(),e.I0R(21,"div",10),e.wR5(22,"sample-po-http-interceptor-labs"),e.C$Y(),e.wR5(23,"hr")),2&o&&(e.yG2(5),e.m8U("po-icon "+t.sampleCodeButtonIcon),e.yG2(),e.oRS(" ",t.sampleCodeButtonLabel,""),e.yG2(),e.E7m("ngClass",e.S45(4,R,t.hideSampleCodeTabs)))},dependencies:[C.QF,O.x,r.ItZ,r.iiQ,d],encapsulation:2})}class l{static \u0275fac=function(o){return new(o||l)};static \u0275cmp=e.In1({type:l,selectors:[["sample-po-http-interceptor-doc"]],decls:160,vars:0,consts:[[1,"docs-api"],[1,"docs-api-module-import"],[1,"docs-api-class-description"],[1,"docs-api-h3"],[1,"docs-api-class-name"],[1,"doc-code"],["id","configura\xe7\xe3o"],["id","como-usar"],["id","estrutura-das-mensagens"],["id","mensagens-de-sucesso-2xx"],["id","mensagens-de-erro-4xx-ou-5xx"],["href","guides/api"],["id","cabe\xe7alho"]],template:function(o,t){1&o&&(e.I0R(0,"div",0)(1,"p",1)(2,"code"),e.OEk(3,"import { PoHttpInterceptorModule } from '@po-ui/ng-components';"),e.C$Y()(),e.wR5(4,"div",2),e.I0R(5,"h3",3),e.OEk(6,"Services"),e.C$Y(),e.I0R(7,"h4",4)(8,"code",5),e.OEk(9,"PoHttpInterceptorService"),e.C$Y()(),e.I0R(10,"div",2)(11,"p"),e.OEk(12,"O "),e.I0R(13,"em"),e.OEk(14,"interceptor"),e.C$Y(),e.OEk(15," tem a finalidade de exibir notifica\xe7\xf5es com mensagens na tela, baseado nas respostas das requisi\xe7\xf5es HTTP."),e.C$Y(),e.I0R(16,"p"),e.OEk(17,"Pode ser utilizado para dar feedback das a\xe7\xf5es do usu\xe1rio como, por exemplo: erro de autoriza\xe7\xe3o, mensagens de regras de neg\xf3cio,\natualiza\xe7\xf5es de registros, erro quando o servidor estiver indispon\xedvel e entre outros."),e.C$Y(),e.I0R(18,"h2",6),e.OEk(19,"Configura\xe7\xe3o"),e.C$Y(),e.I0R(20,"p"),e.OEk(21,"Para o correto funcionamento do interceptor "),e.I0R(22,"code"),e.OEk(23,"po-http-interceptor"),e.C$Y(),e.OEk(24,", deve ser importado o "),e.I0R(25,"code"),e.OEk(26,"BrowserAnimationsModule"),e.C$Y(),e.OEk(27," no\nm\xf3dulo principal da sua aplica\xe7\xe3o."),e.C$Y(),e.I0R(28,"p"),e.OEk(29,"M\xf3dulo da aplica\xe7\xe3o:"),e.C$Y(),e.I0R(30,"pre")(31,"code"),e.OEk(32,"import { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { PoModule } from '@po-ui/ng-components';\n...\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    ...\n    PoModule\n  ],\n  declarations: [\n    AppComponent,\n    ...\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }"),e.C$Y()(),e.I0R(33,"p"),e.OEk(34,"Ao importar o m\xf3dulo "),e.I0R(35,"code"),e.OEk(36,"PoModule"),e.C$Y(),e.OEk(37," na aplica\xe7\xe3o, o "),e.I0R(38,"code"),e.OEk(39,"po-http-interceptor"),e.C$Y(),e.OEk(40," \xe9 automaticamente configurado sem a necessidade\nde qualquer configura\xe7\xe3o extra."),e.C$Y(),e.I0R(41,"p"),e.OEk(42,"Ao realizar requisi\xe7\xf5es utilize o "),e.I0R(43,"code"),e.OEk(44,"HttpClient"),e.C$Y(),e.OEk(45,", conforme exemplo abaixo:"),e.C$Y(),e.I0R(46,"pre")(47,"code"),e.OEk(48,"import { HttpClient } from '@angular/common/http';\n\n...\n\n@Injectable()\nexport class UserService {\n\n  constructor(private http: HttpClient) { }\n\n  getUsers() {\n    return this.http.get('/api/users');\n  }\n\n  ...\n\n}"),e.C$Y()(),e.I0R(49,"h2",7),e.OEk(50,"Como usar"),e.C$Y(),e.I0R(51,"p"),e.OEk(52,"Para exibir as notica\xe7\xf5es \xe9 necess\xe1rio informar a mensagem no retorno da requisi\xe7\xe3o. A estrutura da mensagem\n\xe9 feita com base no status da resposta, conforme ser\xe1 apresentado nos pr\xf3ximos t\xf3picos."),e.C$Y(),e.I0R(53,"h3",8),e.OEk(54,"Estrutura das mensagens"),e.C$Y(),e.I0R(55,"h4",9),e.OEk(56,"Mensagens de sucesso "),e.I0R(57,"code"),e.OEk(58,"2xx"),e.C$Y()(),e.I0R(59,"p"),e.OEk(60,"Para exibir mensagens ao retornar uma lista ou um item, deve-se incluir a propriedade "),e.I0R(61,"code"),e.OEk(62,"_messages"),e.C$Y(),e.OEk(63," no objeto de retorno.\nPor exemplo:"),e.C$Y(),e.I0R(64,"pre")(65,"code"),e.OEk(66,'{\n  "_messages": [\n    {\n      "type": "success" || "warning" || "error" || "information" (ser\xe1 exibido a `tag` apenas se esta propriedade possuir valor),\n      "code": "t\xedtulo ou c\xf3digo da mensagem",\n      "message": "texto da mensagem",\n      "detailedMessage": "detalhamento da mensagem"\n    }\n  ]\n}'),e.C$Y()(),e.I0R(67,"h4",10),e.OEk(68,"Mensagens de erro "),e.I0R(69,"code"),e.OEk(70,"4xx"),e.C$Y(),e.OEk(71," ou "),e.I0R(72,"code"),e.OEk(73,"5xx"),e.C$Y()(),e.I0R(74,"p"),e.OEk(75,"Ao retornar erro, o objeto n\xe3o necessita ter "),e.I0R(76,"code"),e.OEk(77,"_messages"),e.C$Y(),e.OEk(78,", deve-se retornar o objeto diretamente:"),e.C$Y(),e.I0R(79,"pre")(80,"code"),e.OEk(81,'{\n   "code": "t\xedtulo ou c\xf3digo da mensagem",\n   "message": "texto da mensagem",\n   "detailedMessage": "detalhamento da mensagem"\n}'),e.C$Y()(),e.I0R(82,"p"),e.OEk(83,"Tamb\xe9m \xe9 poss\xedvel informar as seguintes propriedades:"),e.C$Y(),e.I0R(84,"ul")(85,"li")(86,"code"),e.OEk(87,"helpUrl"),e.C$Y(),e.OEk(88,": link para a documenta\xe7\xe3o do erro;"),e.I0R(89,"ul")(90,"li"),e.OEk(91,'Caso for informado, ser\xe1 exibido uma a\xe7\xe3o de "Ajuda" na notifica\xe7\xe3o, para isso n\xe3o dever\xe1 ter a propriedade '),e.I0R(92,"code"),e.OEk(93,"detailedMessage"),e.C$Y(),e.OEk(94,"."),e.C$Y()()(),e.I0R(95,"li")(96,"code"),e.OEk(97,"type"),e.C$Y(),e.OEk(98,": \xc9 poss\xedvel informar "),e.I0R(99,"code"),e.OEk(100,"error"),e.C$Y(),e.OEk(101,", "),e.I0R(102,"code"),e.OEk(103,"warning"),e.C$Y(),e.OEk(104," e "),e.I0R(105,"code"),e.OEk(106,"information"),e.C$Y(),e.OEk(107,", sendo "),e.I0R(108,"code"),e.OEk(109,"error"),e.C$Y(),e.OEk(110," o valor padr\xe3o."),e.C$Y(),e.I0R(111,"li")(112,"code"),e.OEk(113,"details"),e.C$Y(),e.OEk(114,": Uma lista de objetos de mensagem (recursiva) com mais detalhes sobre a mensagem principal."),e.C$Y(),e.I0R(115,"li")(116,"code"),e.OEk(117,"detailTitle"),e.C$Y(),e.OEk(118,": caso for informado, ser\xe1 apresentado como t\xedtulo dos detalhes substituindo o padr\xe3o "),e.I0R(119,"code"),e.OEk(120,"code - message"),e.C$Y()()(),e.I0R(121,"blockquote")(122,"p"),e.OEk(123,"Veja o "),e.I0R(124,"a",11),e.OEk(125,"Guia de implementa\xe7\xe3o de APIs"),e.C$Y(),e.OEk(126," para mais detalhes sobre a estrutura das mensagens."),e.C$Y()(),e.I0R(127,"h3",12),e.OEk(128,"Cabe\xe7alho"),e.C$Y(),e.I0R(129,"p"),e.OEk(130,"\xc9 poss\xedvel dispensar a notifica\xe7\xe3o para o usu\xe1rio utilizando no cabe\xe7alho da requisi\xe7\xe3o os par\xe2metros listados abaixo com o valor\nigual a "),e.I0R(131,"code"),e.OEk(132,"true"),e.C$Y(),e.OEk(133,":"),e.C$Y(),e.I0R(134,"ul")(135,"li")(136,"p")(137,"code"),e.OEk(138,"X-PO-No-Message"),e.C$Y(),e.OEk(139,": N\xe3o exibe notifica\xe7\xf5es de erro e/ou sucesso."),e.C$Y()(),e.I0R(140,"li")(141,"p")(142,"code"),e.OEk(143,"X-PO-No-Error"),e.C$Y(),e.OEk(144,": N\xe3o mostra notifica\xe7\xf5es de erro com c\xf3digos "),e.I0R(145,"code"),e.OEk(146,"4xx"),e.C$Y(),e.OEk(147," e "),e.I0R(148,"code"),e.OEk(149,"5xx"),e.C$Y(),e.OEk(150,"."),e.C$Y()()(),e.I0R(151,"pre")(152,"code"),e.OEk(153,"...\n const headers = { 'X-PO-No-Message': 'true' };\n\n this.http.get(`/customers/1`, { headers: headers });\n..."),e.C$Y()(),e.I0R(154,"blockquote")(155,"p"),e.OEk(156,"Ap\xf3s a valida\xe7\xe3o no "),e.I0R(157,"em"),e.OEk(158,"interceptor"),e.C$Y(),e.OEk(159,", os par\xe2metros ser\xe3o removidos do cabe\xe7alho da requisi\xe7\xe3o. "),e.C$Y()()()())},encapsulation:2})}class m{route;router;sub;hidePoWebSample=!0;samplesLength=1;activeTab="\x1cdoc";actions=[{label:"Documenta\xe7\xe3o",action:this.goBack.bind(this),icon:"po-icon-document-filled"},{label:"Colabore",action:this.improveDocs.bind(this)}];constructor(s,o){this.route=s,this.router=o}goBack(){this.router.navigate(["documentation"])}improveDocs(){this.router.navigate(["guides/development-flow"])}ngOnInit(){this.sub=this.route.queryParams.subscribe(s=>{const o=s.view;this.activeTab=o||"doc",this.hidePoWebSample=0===this.samplesLength})}ngOnDestroy(){this.sub.unsubscribe()}static \u0275fac=function(o){return new(o||m)(e.GI1(c.gV),e.GI1(c.E5))};static \u0275cmp=e.In1({type:m,selectors:[["ng-component"]],decls:6,vars:4,consts:[["p-title"," Http Interceptor",3,"p-actions"],["p-size","1"],["p-label","Documenta\xe7\xe3o",3,"p-active"],["p-label","Exemplos",3,"p-hide","p-active"]],template:function(o,t){1&o&&(e.I0R(0,"po-page-default",0)(1,"po-tabs",1)(2,"po-tab",2),e.wR5(3,"sample-po-http-interceptor-doc"),e.C$Y(),e.I0R(4,"po-tab",3),e.wR5(5,"sample-po-http-interceptor-labs-view"),e.C$Y()()()),2&o&&(e.E7m("p-actions",t.actions),e.yG2(2),e.E7m("p-active",t.activeTab.includes("doc")),e.yG2(2),e.E7m("p-hide",t.hidePoWebSample)("p-active",t.activeTab.includes("web")))},dependencies:[r.meF,r.ItZ,r.iiQ,u,l],encapsulation:2})}const v=[{path:"",component:m}];class h{static \u0275fac=function(o){return new(o||h)};static \u0275mod=e.a4G({type:h});static \u0275inj=e.s3X({imports:[c.qQ.forChild(v),c.qQ]})}class g{static \u0275fac=function(o){return new(o||g)};static \u0275mod=e.a4G({type:g});static \u0275inj=e.s3X({imports:[b.k,h]})}}}]);